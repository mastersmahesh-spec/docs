def import_eventing_function_from_file(json_path: str) -> str:
    """
    Read the function definition from a JSON file and upsert it
    into the destination cluster.

    Returns the function name (appname) that was imported.
    """
    if not os.path.isfile(json_path):
        raise FileNotFoundError(f"JSON file not found: {json_path}")

    with open(json_path, "r", encoding="utf-8") as f:
        definition = json.load(f)

    fn_name = definition.get("appname")
    if not fn_name:
        raise ValueError("JSON does not contain 'appname' field")

    # POST to /functions/{name}
    url = (
        f"https://{EVENTING_HOST}:18096/api/v1/functions/{fn_name}"
        f"{scope_suffix()}"
    )

    resp = requests.post(
        url,
        auth=(USERNAME, PASSWORD),
        json=definition,
        verify=CA_CERT_PATH,
        timeout=30,
    )
    resp.raise_for_status()

    print(f"Imported / upserted Eventing function '{fn_name}' into cluster")
    return fn_name


def deploy_eventing_function(fn_name: str) -> None:
    """
    Deploy the given Eventing function on the destination cluster.
    """
    url = (
        f"https://{EVENTING_HOST}:18096/api/v1/functions/{fn_name}/deploy"
        f"{scope_suffix()}"
    )

    resp = requests.post(
        url,
        auth=(USERNAME, PASSWORD),
        verify=CA_CERT_PATH,
        timeout=30,
    )
    resp.raise_for_status()

    print(f"Deployed Eventing function '{fn_name}'")
